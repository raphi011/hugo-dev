<!DOCTYPE html>
<html lang="{{ .Lang | default "en" }}" dir="{{ .Language.LanguageDirection | default "ltr" }}">
  <head>
    {{- partial "head.html" . -}}
  </head>
  <body class="bg-ctp-base text-ctp-text min-h-screen flex flex-col">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:rounded focus:bg-ctp-blue focus:px-3 focus:py-1 focus:text-ctp-base focus:text-sm">Skip to content</a>
    {{- partial "header.html" . -}}
    <main id="main-content" class="flex-1 w-full max-w-3xl mx-auto px-4 py-8">
      {{- block "main" . }}{{ end -}}
    </main>
    {{- partial "footer.html" . -}}
    <script>
    document.querySelectorAll('pre.shiki').forEach(function(pre) {
      const wrapper = document.createElement('div');
      wrapper.className = 'shiki-wrapper';
      pre.parentNode.insertBefore(wrapper, pre);
      wrapper.appendChild(pre);

      const btn = document.createElement('button');
      btn.className = 'shiki-copy';
      btn.textContent = 'Copy';

      function flash(label) {
        btn.textContent = label;
        setTimeout(function() { btn.textContent = 'Copy'; }, 2000);
      }

      btn.addEventListener('click', function() {
        const code = pre.querySelector('code');
        if (!code || !navigator.clipboard) {
          flash('Error');
          return;
        }
        navigator.clipboard.writeText(code.textContent).then(function() {
          flash('Copied!');
        }).catch(function(err) {
          console.error('Copy failed:', err);
          flash('Error');
        });
      });
      wrapper.appendChild(btn);
    });
    </script>
  </body>
</html>
