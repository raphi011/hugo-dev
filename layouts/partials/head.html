<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="color-scheme" content="light dark">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#eff1f5">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1e1e2e">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
{{ with or .Description .Site.Params.description }}
<meta name="description" content="{{ . }}">
{{ end }}

<title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>

{{/* CSS: template deferred so hugo_stats.json is fully built before Tailwind processes it */}}
{{ with (templates.Defer (dict "key" "global")) }}
  {{ with resources.Get "css/main.css" }}
    {{ $css := . | css.TailwindCSS }}
    {{ $css = $css | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">
  {{ end }}

  {{/* Custom CSS override hook */}}
  {{ with resources.Get "css/custom.css" | minify | fingerprint }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}">
  {{ end }}
{{ end }}

{{/* User-provided custom head hook */}}
{{ if templates.Exists "partials/custom-head.html" }}
  {{ partial "custom-head.html" . }}
{{ end }}

{{/* Favicons */}}
{{ with .Site.Params.favicon }}
  <link rel="icon" href="{{ . }}">
{{ else }}
  <link rel="icon" href="{{ "favicon.ico" | relURL }}">
{{ end }}

{{/* RSS */}}
{{ range .AlternativeOutputFormats }}
  {{ printf `<link rel="%s" type="%s" href="%s" title="%s">` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
{{ end }}

{{/* Canonical URL */}}
<link rel="canonical" href="{{ .Permalink }}">

{{/* Hugo built-in templates */}}
{{ template "_internal/opengraph.html" . }}
{{ template "_internal/twitter_cards.html" . }}
{{ template "_internal/schema.html" . }}
